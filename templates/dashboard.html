<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Dashboard ‚Ä¢ Seven33 Blog</title>
<style>
    :root {
        --bg-color: #f0f0f0;
        --text-color: #000;
        --header-bg: #333;
        --header-text: #fff;
        --card-bg: #fff;
        --card-text: #000;
        --link-color: #007BFF;
    }

    body.dark {
        --bg-color: #121212;
        --text-color: #eee;
        --header-bg: #1f1f1f;
        --header-text: #fff;
        --card-bg: #1e1e1e;
        --card-text: #fff;
        --link-color: #66b2ff;
    }

    body { font-family: Arial, sans-serif; background: var(--bg-color); color: var(--text-color); margin:0; padding:0; transition:0.3s; }
    header { background: var(--header-bg); color: var(--header-text); padding:1rem; display:flex; justify-content:space-between; align-items:center; }
    a { color: var(--header-text); text-decoration:none; margin-left:1rem; }
    .container { padding:2rem; }
    .post { background: var(--card-bg); color: var(--card-text); padding:1rem; margin-bottom:1rem; border-radius:8px; box-shadow:0 2px 5px rgba(0,0,0,0.1); }
    .post h2 { margin:0; }
    .meta { font-size:0.9rem; color:#555; margin-bottom:0.5rem; }
    .actions a { margin-right:0.5rem; text-decoration:none; color: var(--link-color); }
    .actions a:hover { text-decoration:underline; }
    .flash { background:#d4edda; color:#155724; padding:0.5rem 1rem; border-radius:4px; margin-bottom:1rem; }
    .toggle-btn { cursor:pointer; font-weight:bold; margin-left:1rem; }
</style>
</head>
<body>

<header>
    <div>Dashboard</div>
    <div>
        <a href="{{ url_for('create_post') }}">+ New Post</a>
        <span class="toggle-btn" id="modeToggle">üåô</span>
        <a href="{{ url_for('logout') }}">Logout</a>
    </div>
</header>

<div class="container">

    {% with messages = get_flashed_messages() %}
      {% if messages %}
        {% for msg in messages %}
            <div class="flash">{{ msg }}</div>
        {% endfor %}
      {% endif %}
    {% endwith %}

    {% for post in posts %}
    <div class="post">
        <h2>{{ post.title }}</h2>
        <div class="meta">By {{ post.author }} | {{ post.created_at.strftime('%b %d, %Y %H:%M') }}</div>
        <div class="actions">
            <a href="{{ url_for('edit_post', post_id=post.id) }}">Edit</a>
            <a href="{{ url_for('delete_post', post_id=post.id) }}">Delete</a>
            <a href="{{ url_for('view_post', slug=post.slug) }}">View</a>
        </div>
    </div>
    {% else %}
    <p>No posts yet. <a href="{{ url_for('create_post') }}">Create your first post</a>.</p>
    {% endfor %}

</div>

<script>
const toggleBtn = document.getElementById('modeToggle');
const body = document.body;
if (localStorage.getItem('mode') === 'dark') { body.classList.add('dark'); toggleBtn.textContent = '‚òÄÔ∏è'; }
toggleBtn.addEventListener('click', () => {
    body.classList.toggle('dark');
    if(body.classList.contains('dark')){ toggleBtn.textContent = '‚òÄÔ∏è'; localStorage.setItem('mode', 'dark'); }
    else { toggleBtn.textContent = 'üåô'; localStorage.setItem('mode', 'light'); }
});
</script>

</body>
</html>
